# Prosopagknows Web App

### The Premise:
Ever get really, really confused watching movies? It's not that you can't follow the plot, it's just... there's so many faces! I myself (a proud prosopagnosiac) have a condition that prevents me from recognizing faces, even those of my friends and family. I have plenty of strategies to navigate this, but as an avid movie enjoyer, I found I needed a little extra help to tell apart all the characters. 

## How it Works:
![Image](./readme_images/search.png)

### What are you watching?
There's room for error here, but try and get the title right. The movie you're looking for is usually the first to appear in the list.

![Image](./readme_images/search_results.png)

### Cast
![Image](./readme_images/cast.png)
An analysis has been run to determine which characters were important enough / relevant enough to be included, but here you have the opportunity to add or remove characters from this list. The reason for this is quite simple:
![Image](./readme_images/uruk-hai.png)
There is very little reason to train on every orc in Lord of the Rings. You may do this, if this is what you wish to do, but it will take forever and produce bad results. The image scraping is dependent upon relevant search results, which may not always be available for each individual Uruk-hai.


Depending on the number of images you've chosen to train on and the amount of characters in your movie, this can take a little while. For me, on an Intel Mac, it tends to take around 15 minutes. I recommend running this BEFORE you start watching, so that if you ever get stuck on a face, you can immediately get results!

### Image Scraping & Training
Just hit run, but make sure to let the image scraping finish before starting training!

### Image Upload
Now comes the fun part. Just upload your image!

Fun use case:
![Image](./readme_images/dune1.png)
Realistic use case:
![Image](./readme_images/dune2.png)

Other Examples:
![Image](./readme_images/SinnersPoster.png)
![Image](./readme_images/council_of_elrond.png)
The program even recognizes the actors in cast photos!
![Image](./readme_images/lotr_cast.png)
*Note that these were run with the original Python script, and thus lack the green boxes that come with the web application.*

## How to Run:

Slightly more complicated and requires three terminals.

### Terminal One: ML Service
Navigate to the `ml-service` directory. Then run this in the terminal:
```shell
uvicorn app:app --reload --port 8000
```
This will require the installation of uvicorn, and likely a virtual environment. A [requirements file](./requirements.txt) is available for this purpose.

### Terminal Two: Server
Navigate to the `server` directory. Then run this in the terminal:
```shell
node index.js
```

### Terminal Three: Client
Navigate to the `client` directory. Then run this in the terminal:
```shell
npm run dev
```

## Final Notes

#### Credits
Although I have written the full functionality behind this application, *ChatGPT* is responsible for the beautification of my otherwise skeletal web application.

#### Other
The Python notebook this is built off (Prosopagknows v2) is still accessible within this directory ![prosopagknows.ipynb](./prosopagknows.ipynb).

This is a project I started in high school with my partner Isaac at Choate Rosemary Hall. In this original iteration, we downloaded enormous IMDB CSVs, didn't understand virtual environments, and identified characters in *Harry Potter* as Ron Weasley about 40% of the time. Since then, the technology has improved, and so have we. I miss you Isaac :)

#### On API Keys:
I've published my API Keys which **I KNOW** is absolutely terrible. However, this is a very small project and the worst that can happen is that my credits for image scraping / tmdb are timed out for the month. I've decided this is something I can live with.

To create your *own* API keys (recommended):
**TMDB:** https://developer.themoviedb.org/docs/getting-started
- 'The Movie DataBase'

serpAPI: https://serpapi.com/users/sign_up?plan=free
- Google image search scraper